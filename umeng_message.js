"use strict";(function(a,b){var c=function(){};c.prototype={init:function(){this.config=a.umengMessageConfig||{},this.demo=a.umengMessageDemo,this.createDom()},createDom:function(){this.dom=b.createElement("div"),this.dom.className="umeng_message",!this.config.hide||(this.dom.style.display="none");var a=this.config&&this.config.dom||{},c=a.right||0,d=a.bottom||24,e=a.zIndex||2147483647;this.dom.style.right=c+"px",this.dom.style.bottom=d+"px",this.dom.style.zIndex=e,b.body.appendChild(this.dom),this.createIcons(),this.createMi()},loadCSS:function(){},loadJS:function(a){var c=b.createElement("script");c.setAttribute("src",a),b.getElementsByTagName("head")[0].appendChild(c)},createIcons:function(){this.icons=b.createElement("ul"),this.icons.className="umeng_message_icons",this.dom.appendChild(this.icons)},createService:function(){var a=this,c=function(){var b=a.dom.classList;b.remove("active_service")},d=function d(f){for(var e=f.target;e&&e.parentNode&&e!==a.dom;)e=e.parentNode;e!==a.dom&&(c(),b.body.removeEventListener("click",d,!1))},e=b.createElement("li");e.className="umeng_message_icon_service",e.innerHTML="\n\t\t\t\t\t<span class=\"umeng_message_icon\"><i class=\"umeng_message_iconfont\" style=\"font-size:24px;\">&#xe622;</i></span>\n\t\t  \t\t\t<span class=\"umeng_message_text\">\u5728\u7EBF<br/>\u5BA2\u670D</span>\n\t\t  \t\t",this.icons.insertBefore(e,this.formDom),e.addEventListener("click",function(){var c=a.dom.classList;c.remove("active_code"),c.remove("active_app_code"),c.remove("active_form"),c.contains("active_service")?c.remove("active_service"):c.add("active_service"),b.body.addEventListener("click",d,!1)},!1),this.dplus(e,"mouseenter","gndj_rkxf",{rkmc:"\u5728\u7EBF\u5BA2\u670D"}),this.dplus(e,"click","gndj_rk",{rkmc:"\u5728\u7EBF\u5BA2\u670D"})},createLink:function(a){var c=b.createElement("li");c.innerHTML="\n\t\t\t\t<a href=\"//account.umeng.com/feedback\" target=\"_blank\">\n\t\t\t\t\t<span class=\"umeng_message_icon\">\n\t\t  \t\t\t\t<i class=\"umeng_message_iconfont\">&#xe605;</i>\n\t\t  \t\t\t</span>\n\t\t  \t\t\t<span class=\"umeng_message_text\">\u53CD\u9988<br/>\u4E2D\u5FC3</span>\n\t\t  \t\t\t"+(!0===a.data?"<sup>&bull;</sup>":"")+"\n\t\t\t\t</a>\n\t\t  \t\t",c.className="umeng_message_icon_links",this.icons.insertBefore(c,this.codeDom),this.dplus(c,"mouseenter","gndj_rkxf",{rkmc:"\u53CD\u9988\u4E2D\u5FC3"}),this.dplus(c,"mousedown","gndj_rk",{rkmc:"\u53CD\u9988\u4E2D\u5FC3"},!0)},createForm:function(){var a=this,c=function(){var b=a.dom.classList;b.remove("active_form")},d=function d(f){for(var e=f.target;e&&e.parentNode&&e!==a.dom;)e=e.parentNode;e!==a.dom&&(c(),b.body.removeEventListener("click",d,!1))},e=function(){a.formData={questionInfo:"",ticketCategoryId:"",company:"",name:"",telephone:"",ticketTemplateId:""},Object.keys(a.formChild).map(function(b){a.formChild[b].classList.remove("error"),a.formChild[b].value=""}),b.querySelector(".umeng_message_form_inner").classList.remove("sending"),b.querySelector(".umeng_message_form_inner").classList.remove("success"),b.querySelector(".umeng_message_form_inner").classList.remove("error")},f=b.createElement("li");f.innerHTML="\n\t\t\t\t<span class=\"umeng_message_icon\"><i class=\"umeng_message_iconfont\">&#xe613;</i></span>\n    \t\t\t<span class=\"umeng_message_text\">\u5546\u52A1<br/>\u54A8\u8BE2</span>\n\t\t\t",f.className="umeng_message_icon_form",this.icons.appendChild(f),this.formDom=f,f.addEventListener("click",function(){var c=a.dom.classList;c.remove("active_code"),c.remove("active_app_code"),c.remove("active_service"),c.contains("active_form")?c.remove("active_form"):c.add("active_form"),b.body.addEventListener("click",d,!1)},!1);var g=b.createElement("div");g.className="umeng_message_form",g.innerHTML="\n\t\t\t\t<div class=\"umeng_message_form_title\">\u8BF7\u8F93\u5165\u5982\u4E0B\u54A8\u8BE2\u5185\u5BB9\uFF1A</div>\n\t\t\t\t<div class=\"umeng_message_form_inner"+(this.isLogin?" islogin":"")+"\">\n\t\t\t\t\t<div class=\"umeng_message_form_item umeng_message_form_select_wrapper\">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"\u9009\u62E9\u8981\u54A8\u8BE2\u7684\u4EA7\u54C1\uFF08\u5FC5\u586B\uFF09\" disabled/>\n\t\t\t\t\t\t\t<i class=\"umeng_message_iconfont\">&#xe61a;</i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<ul class=\"umeng_message_form_select\">\n\t\t\t\t\t\t\t<li>\u52A0\u8F7D\u4E2D...</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"umeng_message_form_item umeng_message_form_item_company\">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"\u8F93\u5165\u4F60\u7684\u516C\u53F8\u6216\u4EA7\u54C1\u540D\u79F0\"/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"umeng_message_form_item umeng_message_form_item_name\">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"\u8054\u7CFB\u4EBA\u59D3\u540D\uFF08\u5FC5\u586B\uFF09\"/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"umeng_message_form_item  umeng_message_form_item_telephone\">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input type=\"text\" placeholder=\"\u8054\u7CFB\u4EBA\u624B\u673A\u53F7\uFF08\u5FC5\u586B\uFF09\"/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"umeng_message_form_item\">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<textarea placeholder=\"\u8BF7\u63CF\u8FF0\u60A8\u7684\u8BE6\u7EC6\u8BC9\u6C42\uFF08\u5FC5\u586B\uFF09\" class=\"umeng_message_form_item_questionInfo\"></textarea>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"umeng_message_form_footer\">\n\t\t\t\t\t\t<button>\u63D0 \u4EA4</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"umeng_message_form_loading\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<svg class=\"lds-spinner\" width=\"100px\"  height=\"100px\"  xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" style=\"background: none;\"><g transform=\"rotate(0 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.9166666666666666s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(30 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.8333333333333334s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(60 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.75s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(90 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.6666666666666666s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(120 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.5833333333333334s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(150 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.5s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(180 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.4166666666666667s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(210 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.3333333333333333s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(240 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.25s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(270 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.16666666666666666s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(300 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"-0.08333333333333333s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g><g transform=\"rotate(330 50 50)\">\n  <rect x=\"47\" y=\"24\" rx=\"9.4\" ry=\"4.8\" width=\"6\" height=\"12\" fill=\"#449cfa\">\n    <animate attributeName=\"opacity\" values=\"1;0\" times=\"0;1\" dur=\"1s\" begin=\"0s\" repeatCount=\"indefinite\"></animate>\n  </rect>\n</g></svg>\n<p>\u63D0\u4EA4\u4E2D...</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"umeng_message_form_error\"></div>\n\t\t\t\t\t<div class=\"umeng_message_form_info\">\n\t\t\t\t\t\t\u63D0\u4EA4\u6210\u529F\uFF01\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t",this.dom.appendChild(g),f.style.display="none",this.createAppDownload(),this.createCode(),this.createScrollTop();var h=g.querySelector(".umeng_message_form_footer > button");this.formData={questionInfo:"",ticketCategoryId:"",company:"",name:"",telephone:"",ticketTemplateId:""},this.formChild={ticketCategoryId:g.querySelector(".umeng_message_form_select_wrapper input"),questionInfo:g.querySelector(".umeng_message_form_item_questionInfo"),company:g.querySelector(".umeng_message_form_item_company input"),name:g.querySelector(".umeng_message_form_item_name input"),telephone:g.querySelector(".umeng_message_form_item_telephone input")},Object.keys(this.formChild).map(function(b){"ticketCategoryId"!==b&&(a.formChild[b].onkeyup=function(){i(b,a.formChild[b])},a.formChild[b].onblur=function(){setTimeout(function(){j(b,a.formChild[b])},50)})});var i=function(b,c){a.formData[b]=c.value},j=function(b,c){a.formData[b]&&""!=a.formData[b]?c.classList.remove("error"):c.classList.add("error")};b.querySelector(".umeng_message_form_error").onclick=function(){e()},b.querySelector(".umeng_message_form_info").onclick=function(){e()},h.onclick=function(){if(Object.keys(a.formChild).map(function(b){a.isLogin?("ticketCategoryId"===b||"questionInfo"===b)&&j(b,a.formChild[b]):j(b,a.formChild[b])}),!g.querySelector(".error")){var c=b.querySelector(".umeng_message_form_inner");c.classList.add("sending");var d=a.formData,e=d.questionInfo,f=d.ticketCategoryId,h=d.ticketTemplateId,i=d.company,k=d.name,l=d.telephone,m=new XMLHttpRequest;m.open("post","//account.umeng.com/api/ticket/create",!0),m.withCredentials=!0,m.onload=function(){4===m.readyState&&(c.classList.remove("sending"),200===m.status?c.classList.add("success"):(c.classList.add("error"),c.querySelector(".umeng_message_form_error").innerHTML=JSON.parse(m.responseText).msg))},m.onerror=function(){c.classList.remove("sending"),c.classList.add("error"),c.querySelector(".umeng_message_form_error").innerHTML="\u672A\u77E5\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u6216\u8005\u8054\u7CFB\u5BA2\u670D\uFF01"},m.send(JSON.stringify({questionInfo:e,ticketCategoryId:f,ticketTemplateId:h,data:{company:i,name:k,telephone:l}}))}}},createTicketCategoryTree:function(a){var c=this,d=this.dom.getElementsByClassName("umeng_message_form_select_wrapper")[0],e=d.getElementsByTagName("label")[0],f=d.getElementsByTagName("input")[0],g=d.getElementsByTagName("ul")[0];g.innerHTML="",a.map(function(a){var d=b.createElement("li");d.innerHTML=a.name,g.appendChild(d),d.onclick=function(){f.value=a.name,c.formData.ticketCategoryId=a.id,c.formChild.ticketCategoryId.classList.remove("error");var b=a.children.filter(function(a){return"\u5546\u52A1\u54A8\u8BE2"==a.name});c.formData.ticketTemplateId=b[0]&&b[0].id,h()}});var h=function(){d.classList.remove("active")},i=function a(c){for(var e=c.target;e&&e.parentNode&&e!==d;)e=e.parentNode;e!==d&&(h(),b.body.removeEventListener("click",a,!1))};e.onclick=function(){d.classList.add("active"),b.body.addEventListener("click",i,!1)}},createCode:function(){var a=this,c=function(){var b=a.dom.classList;b.remove("active_code")},d=function d(f){for(var e=f.target;e&&e.parentNode&&e!==a.dom;)e=e.parentNode;e!==a.dom&&(c(),b.body.removeEventListener("click",d,!1))},e=b.createElement("li");e.innerHTML="\n\t\t\t\t<span class=\"umeng_message_icon\"><i class=\"umeng_message_iconfont\">&#xe67e;</i></span>\n    \t\t\t<span class=\"umeng_message_text\">\u5173\u6CE8<br/>\u6211\u4EEC</span>\n\t\t\t",e.className="umeng_message_icon_code",this.icons.appendChild(e),this.codeDom=e;var f=b.createElement("div");f.className="umeng_message_code",f.innerHTML="\n\t\t\t\t<div>\n\t\t\t\t\t<img src=\"//img.alicdn.com/tfs/TB1wPbsaYGYBuNjy0FoXXciBFXa-176-176.png\" alt=\"\" />\n\t\t\t\t\t<p>\u53CB\u76DF\u5168\u57DF\u6570\u636E</p>\n\t\t\t\t\t<span>\u524D\u6CBF\u7684\u6570\u636E\u884C\u4E1A\u65B0\u98CE\u5411</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<img src=\"//img.alicdn.com/tfs/TB1T4DKa4GYBuNjy0FnXXX5lpXa-176-176.png\" alt=\"\" />\n\t\t\t\t\t<p>\u53CB\u76DF\u6570\u636E\u670D\u52A1</p>\n\t\t\t\t\t<span>\u62A5\u544A/\u5E72\u8D27/App\u3001Web\u67E5\u8BE2</span>\n\t\t\t\t</div>\n\t\t\t",this.dom.appendChild(f),e.addEventListener("click",function(){var c=a.dom.classList;c.remove("active_service"),c.remove("active_form"),c.remove("active_app_code"),c.contains("active_code")?c.remove("active_code"):c.add("active_code"),b.body.addEventListener("click",d,!1)},!1),this.dplus(e,"mouseenter","gndj_rkxf",{rkmc:"\u4E8C\u7EF4\u7801"}),this.dplus(e,"click","gndj_rkxf",{rkmc:"\u4E8C\u7EF4\u7801"})},createAppDownload:function(){var a=this,c=function(){var b=a.dom.classList;b.remove("active_app_code")},d=function d(f){for(var e=f.target;e&&e.parentNode&&e!==a.dom;)e=e.parentNode;e!==a.dom&&(c(),b.body.removeEventListener("click",d,!1))},e=b.createElement("li");e.innerHTML="\n\t\t\t\t<span class=\"umeng_message_icon\"><i class=\"umeng_message_iconfont\">&#xe68e;</i></span>\n\t\t\t\t\t<span class=\"umeng_message_text\">APP<br/>\u4E0B\u8F7D</span>\n\t\t\t",e.className="umeng_message_icon_app_code",this.icons.appendChild(e),this.codeDom=e;var f=b.createElement("div");f.className="umeng_message_app_code",f.innerHTML="\n\t\t\t\t<div>\n\t\t\t\t\t<img src=\"//img.alicdn.com/tfs/TB1XfKLDG6qK1RjSZFmXXX0PFXa-176-176.png\" alt=\"\" />\n\t\t\t\t\t<p>\u53CB\u76DF+\u5BA2\u6237\u7AEF</p>\n\t\t\t\t\t<span>\u82F9\u679C/\u5B89\u5353\u7248U-App\u7EDF\u8BA1</span>\n\t\t\t\t</div>\n\t\t\t",this.dom.appendChild(f),e.addEventListener("click",function(){var c=a.dom.classList;c.remove("active_service"),c.remove("active_form"),c.remove("active_code"),c.contains("active_app_code")?c.remove("active_app_code"):c.add("active_app_code"),b.body.addEventListener("click",d,!1)},!1),this.dplus(e,"mouseenter","gndj_rkxf",{rkmc:"app\u4E0B\u8F7D"}),this.dplus(e,"click","gndj_rkxf",{rkmc:"app\u4E0B\u8F7D"})},createScrollTop:function(){var c=this.config&&this.config.scroll||{},d=!1!==c.show;if(!d)return null;var e=c.target||b.documentElement,f=c.visibilityHeight||100,g=b.createElement("li");g.style.display=0<(e.scrollTop||b.body.scrollTop)-f?"block":"none",g.innerHTML="\n\t\t\t\t<span class=\"umeng_message_icon\"><i class=\"umeng_message_iconfont\">&#xe895;</i></span>\n    \t\t\t<span class=\"umeng_message_text\">\u8FD4\u56DE<br/>\u9876\u90E8</span>\n\t\t\t",g.addEventListener("click",function(){var a=setInterval(function(){var c=Math.floor(.8*(e.scrollTop||b.body.scrollTop));e.scrollTop=c,b.body.scrollTop=c,5>c&&clearInterval(a)},20)}.bind(this),!1),this.icons.appendChild(g),this.scrollDom=g;var h;a.addEventListener("scroll",function(){clearTimeout(h),h=setTimeout(function(){g.style.display=0<(e.scrollTop||b.body.scrollTop)-f?"block":"none"},100)},!1),this.dplus(g,"mouseenter","gndj_rkxf",{rkmc:"\u56DE\u5230\u9876\u90E8"}),this.dplus(g,"click","gndj_rkxf",{rkmc:"\u56DE\u5230\u9876\u90E8"})},createServicePopup:function(c,d){var e=this;this.tab=[],this.list=[];var f=b.createElement("div");f.className="umeng_message_container",this.servicePop=b.createElement("div"),this.servicePop.className="umeng_message_inner";var g=b.createElement("div");g.className="umeng_message_title",g.innerHTML="\u9009\u62E9\u8981\u54A8\u8BE2\u7684\u4EA7\u54C1";var h=b.createElement("h4");h.className="umeng_message_phone",h.innerHTML="\u70ED\u7EBF\u7535\u8BDD\uFF1A4009901848";var i=b.createElement("ul");i.className="umeng_message_tab",c.map(function(a,c){var d=b.createElement("li");d.innerHTML=a.data.moduleinfo.name,d.addEventListener("click",e.showContainer.bind(e,c),!1),i.appendChild(d),e.tab.push(d)});var j=b.createElement("div");j.className="umeng_message_lists",this.iframeURL={},c.map(function(a){var c=b.createElement("ul");c.className="umeng_message_list",a.data.list_prods.map(function(a){if("adplus_taotrack"!==a.code){var f=b.createElement("li");f.innerHTML="<a href=\"javascript:;\" title=\""+a.name+" - "+a.title+"\"><span>"+a.name+"</span></a>",c.appendChild(f);var g=d+"&from="+a.alicare_from+"&sourceId=1523174451";e.iframeURL[a.code]=g,f.addEventListener("click",e.showMi.bind(e,g),!1),e.dplus(f,"click","zxcp_gndj",{cplm:a.name})}}),j.appendChild(c),e.list.push(c)}),f.appendChild(g),g.appendChild(h),this.servicePop.appendChild(i),this.servicePop.appendChild(j),f.appendChild(this.servicePop),this.dom.appendChild(f);var k=0;c.map(function(b,c){-1!==a.location.href.indexOf(b.data.moduleinfo.code)&&(k=c)}),this.showContainer(k)},showContainer:function(a){var b=this;a=a||0,this.tab.map(function(c,d){a===d?(c.classList.add("active"),b.list[d].classList.add("active")):(c.classList.remove("active"),b.list[d].classList.remove("active"))})},createMi:function(){this.mi=b.createElement("div"),this.mi.className="umeng_message_mi",this.dom.appendChild(this.mi);var c=b.createElement("div");c.className="umeng_message_mi_close umeng_message_iconfont",c.innerHTML="&#xe789;",this.mi.appendChild(c),c.addEventListener("click",this.closeMi.bind(this),!1),this.iframe=b.createElement("iframe"),this.iframe.style.cssText="width:100%;height:100%;border:0 none;",this.iframe.scrolling="no",this.mi.appendChild(this.iframe),a.addEventListener("message",function(b){var c;try{c=JSON.parse(b.data)}catch(a){c={}}var d=c,e=d.code,f=d.source;102===e&&"alicare-dialog"===f&&a.location.reload()})},showMi:function(b){if(!this.isLogin)return void(a.location.href="//passport.umeng.com/login?redirectURL="+encodeURIComponent(a.location.href));this.iframe.src=b,this.mi.classList.remove("hide"),this.mi.classList.add("show"),this.dom.classList.remove("active_service")},closeMi:function(){this.mi.classList.remove("show"),this.mi.classList.add("hide")},dplus:function(c,d,e,f,g){c.addEventListener(d,function(){var c=a.dplus||{track:function(c,a){console.log(c,a)},track_links:function(d,a,b){console.log(d,a,b)}};g?(console.log(b.querySelector(".umeng_message_icon_links a")),c.track_links(".umeng_message_icon_links a",e,f,function(){},500)):c.track(e,f)},!1)},showService:function(a){a.dom&&this.servicePop&&a.dom.appendChild(this.servicePop);for(var b=this.servicePop.getElementsByClassName("umeng_message_lists")[0].getElementsByTagName("li"),c=0;c<b.length;c++)b[c].style.width=a.itemWidth,a.event.map(function(a){b[c].addEventListener(a.trigger,a.callback,!1)})},showIframe:function(a){a.dom&&this.iframe&&(this.iframe.src=this.iframeURL[a.default],a.dom.appendChild(this.iframe))}};var d={loginInfo:"//passport.umeng.com/api/user/publicHeader",menuData:"//www.umeng.com/tms/jsonp/www/data/products",messageExist:"//account.umeng.com/api/ticket/message/exist",ticketExist:"//account.umeng.com/api/ticket/exist",aliMeURL:"//passport.umeng.com/api/user/aliMeUrl",ticketCategoryTree:"//account.umeng.com/api/ticket/category/tree"};a.umengMessage=new c;var e=function(){umengMessage.init(),!0===a.umengMessageDemo&&(d.loginInfo="//dip.alibaba-inc.com/api/v2/services/schema/mock/73568",d.messageExist="//dip.alibaba-inc.com/api/v2/services/schema/mock/73556",d.ticketExist="//dip.alibaba-inc.com/api/v2/services/schema/mock/73486",d.aliMeURL="//dip.alibaba-inc.com/api/v2/services/schema/mock/73963",d.ticketCategoryTree="//dip.alibaba-inc.com/api/v2/services/schema/mock/73534");a.umengMessageGetLoginInfo=function(b){var c=null!=b.data.umplus_uc_loginid&&null!=b.data.umplus_uc_token||"taobao"==b.data.source;umengMessage.isLogin=c,umengMessage.createForm(),umengMessage.createService();var e=d.menuData+"?callback=umengMessageGetMenuData";umengMessage.loadJS(e),a.umengMessageGetLoginInfo=void 0;var f=d.ticketExist+"?callback=umengMessageGetTicketData";umengMessage.loadJS(f);d.ticketCategoryTree+"?callback=umengMessageGetTicketCategoryTreeURL"},a.umengMessageGetTicketCategoryTreeURL=function(a){a&&a.data&&a.data[0]&&umengMessage.createTicketCategoryTree(a.data)};var b;a.umengMessageGetMenuData=function(c){if(c&&c.modules){b=c.modules;var e=d.aliMeURL+"?callback=umengMessageGetAliMiURL";umengMessage.loadJS(e),a.umengMessageGetMenuData=void 0}},a.umengMessageGetAliMiURL=function(c){var d=c&&c.data&&c.data.url||"";umengMessage.createServicePopup(b,d),a.umengMessageGetAliMiURL=void 0},a.umengMessageGetMessageData=function(b){umengMessage.createLink(b),a.umengMessageGetMessageData=void 0},a.umengMessageGetTicketData=function(a){if(a&&a.data&&!0===a.data){var b=d.messageExist+"?callback=umengMessageGetMessageData";umengMessage.loadJS(b)}};var c=d.loginInfo+"?callback=umengMessageGetLoginInfo";umengMessage.loadJS(c)},f={versions:function(){var a=navigator.userAgent,b=navigator.appVersion;return{trident:-1<a.indexOf("Trident"),presto:-1<a.indexOf("Presto"),webKit:-1<a.indexOf("AppleWebKit"),gecko:-1<a.indexOf("Gecko")&&-1==a.indexOf("KHTML"),mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<a.indexOf("Android")||-1<a.indexOf("Linux"),iPhone:-1<a.indexOf("iPhone"),iPad:-1<a.indexOf("iPad"),webApp:-1==a.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};if(f.versions.android||f.versions.iPhone||!!a.ActiveXObject&&b.documentMode&&10>parseInt(b.documentMode));else if(!0===a.umengMessageDemo)e();else{var g=b.getElementsByTagName("SCRIPT"),h="";if(g&&0<g.length)for(var j in g)g[j].src&&g[j].src.match(/umeng_message\.js$/)&&(h=g[j].src.replace(/(.*)umeng_message\.js$/,"$1"));var i=b.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",h+"umeng_message.css"),b.getElementsByTagName("head")[0].appendChild(i),i.addEventListener("load",function(){e()},!1)}})(window,document);